% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/model_analysis.R
\name{cross_validation}
\alias{cross_validation}
\title{Perform leave-future-out cross-validation}
\usage{
cross_validation(
  model,
  k = 10,
  loss_function = "derivative matching",
  optimizer = "ADAM",
  regularization_weight = 0,
  loss_options = list(),
  optim_options = list(),
  path = NULL
)
}
\arguments{
\item{model}{The UDE model to be tested with cross-validation (CV).}

\item{k}{The number of folds for CV going back \emph{k} time steps. That is, a 5-fold
CV will sequentially validate the final 5 time steps. The default is 10 and
the recommended minimum number is 3. Fewer folds will perform faster but won't
validate as much of the time series.}

\item{loss_function}{The loss function for CV.
For more details, see \code{\link{train_UDE}}.}

\item{optimizer}{The optimization algorithm for CV.
For more details, see \code{\link{train_UDE}}.}

\item{regularization_weight}{The regularization weight for CV.
For more details, see \code{\link{train_UDE}}.}

\item{loss_options}{Loss function options for CV.
For more details, see \code{\link{train_UDE}}.}

\item{optim_options}{Optimizer options for CV.
For more details, see \code{\link{train_UDE}}.}

\item{path}{File path for saving a .csv file containing the raw testing data
and forecasts for each fold.}
}
\value{
The function returns a list with two elements:
\itemize{
\item The first contains an estimate of the mean absolute error (MAE) of the
forecasts and associated standard error as a function of the forecast horizon
(1 to \emph{k} time steps into the future).
\item The second contains two elements: \code{horizon_by_var} and \code{raw}. The data frame
\code{horizon_by_var} contains the forecasting errors separated by variable
and the data frame \code{raw} contains the raw testing and forecasting data. If
the model is trained on multiple time series, the second element will also include
a third data frame \code{horizon_by_var_by_series}.
}
}
\description{
\code{cross_validation()} runs leave-future-out cross-validation on the UDE model
using a training routine with \emph{k} folds.
}
\examples{
df <- data.frame("time" = seq(1,40),
                 "speciesA" = rpois(40,20),
                 "speciesB" = rpois(40,40))
NODE_model <- NODE(data = df, time_column_name = "time")
cv_results <- cross_validation(model = NODE_model, k = 5)

}
